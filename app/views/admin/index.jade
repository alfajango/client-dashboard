extends ../layouts/application

block content
  h1 Admin

  h2 Clients
  a(href="/admin/clients/new") Add Client
  a(href="/admin/users/new") Add User

  table
    tr
      th Client
      th Projects
      th Users
    each client in clients
      tr
        td
          a(href="/?client_id=#{client.id}")= client.name
          a(href="/admin/clients/#{client.id}/edit") Edit

        td
          - if (client.projects)
            ul
              - for project in client.projects
                li
                  = project.name
                  | -
                  a(href="/admin/clients/#{client.id}/projects/#{project._id}/edit") Edit

        td
          - if (users[client.id])
            ul
              - for user in users[client.id]
                li
                  = user.email
                  | -
                  a(href="/admin/users/#{user.id}/edit") Edit

  - if (users['not assigned'])
    h2 Unassigned Users
    ul
      - for user in users['not assigned']
        li
          = user.email
          | -
          a(href="/admin/users/#{user.id}/edit") Edit

